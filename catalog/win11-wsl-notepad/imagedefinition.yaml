name: win11-wsl-notepad
version: 0.1.0
base:
  image:
    publisher: microsoftwindowsdesktop
    offer: windows-11
    sku: win11-24h2-pro
    version: latest
customize:
  - task: powershell
    description: Install WSL and Ubuntu
    inline: |
      # Enable WSL feature
      dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
      dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
      
      # Set WSL default version to 2
      wsl --set-default-version 2
      
      # Install Ubuntu
      wsl --install -d Ubuntu

  - task: winget
    description: Install Notepad++
    install:
      - Notepad++.Notepad++
    
validate:
  - task: powershell
    description: Verify WSL and Ubuntu installation
    inline: |
      # Check WSL status
      $wslStatus = wsl --status
      if ($LASTEXITCODE -ne 0) { throw "WSL is not properly installed" }
      
      # Check Ubuntu installation
      $ubuntuCheck = wsl -l -v | Select-String "Ubuntu"
      if (-not $ubuntuCheck) { throw "Ubuntu is not properly installed in WSL" }
      
      # Check Notepad++ installation
      $nppPath = (Get-Command notepad++.exe -ErrorAction SilentlyContinue).Path
      if (-not $nppPath) { throw "Notepad++ is not properly installed" }
